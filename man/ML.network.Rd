% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ML.network.R
\name{ML.network}
\alias{ML.network}
\title{Machine Learning-based Microbial Association Network}
\usage{
ML.network(
  ps,
  method = c("rf", "xgb", "glmnet", "svm", "lgbm", "mlp", "gam"),
  ntree = 500,
  normalize = TRUE,
  scale.method = c("l1", "softmax", "minmax", "none"),
  n_perm = 100,
  p.threshold = 0.05,
  seed = 123,
  n_cores = 2
)
}
\arguments{
\item{ps}{A `phyloseq` object containing OTU/ASV table.}

\item{method}{Character. Machine learning method to use. Options:
\code{"rf"} (Random Forest, ranger),
\code{"xgb"} (XGBoost),
\code{"glmnet"} (ElasticNet regression),
\code{"svm"} (Support Vector Machine, linear kernel),
\code{"lgbm"} (LightGBM),
\code{"mlp"} (Multilayer Perceptron, nnet),
\code{"gam"} (Generalized Additive Model, mgcv).}

\item{ntree}{Integer. Number of trees or iterations for tree-based models.
Default is \code{500}.}

\item{normalize}{Logical. Whether to normalize importance values. Default is \code{TRUE}.}

\item{scale.method}{Character. Normalization method for importance values.
Options: \code{"l1"}, \code{"softmax"}, \code{"minmax"}, \code{"none"}.}

\item{n_perm}{Integer. Number of permutations for significance testing.
Default is \code{100}. Set to \code{0} to skip permutation testing.}

\item{p.threshold}{Numeric. Significance threshold for permutation test.
Default is \code{0.05}.}

\item{seed}{Integer. Random seed for reproducibility. Default is \code{123}.}

\item{n_cores}{Integer. Number of parallel cores. Default is \code{2}.}
}
\value{
A list with the following elements:
\describe{
  \item{edges}{Data frame of significant associations (target, predictor, importance, pval).}
  \item{importance_all}{Data frame of all importance scores (target, predictor, importance).}
  \item{method}{The machine learning method used.}
}
}
\description{
Construct a machine learning-based association network from a `phyloseq` object.
Each taxon (OTU/ASV/species) is iteratively treated as the response variable,
with the remaining taxa as predictors. Various machine learning models are used
to estimate feature importance, followed by permutation testing to assess
significance and construct network edges.
}
\details{
This function iterates over each taxon, treating it as the response variable
and fitting the selected machine learning model against all other taxa.
Variable importance is extracted and normalized (optional).
A permutation test is then conducted to obtain p-values and select significant
associations, forming the network edges.
}
\examples{
\dontrun{
library(phyloseq)
data("GlobalPatterns")

# Subset to 20 taxa for demonstration
ps_sub <- prune_taxa(taxa_names(GlobalPatterns)[1:20], GlobalPatterns)

res <- ML.network(
  ps = ps_sub,
  method = "rf",
  ntree = 100,
  n_perm = 10,
  n_cores = 2
)

head(res$edges)
head(res$importance_all)
}

}
\author{
Wen Tao <\email{2018203048@njau.edu.cn}>
}
